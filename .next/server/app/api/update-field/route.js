"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/update-field/route";
exports.ids = ["app/api/update-field/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupdate-field%2Froute&page=%2Fapi%2Fupdate-field%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupdate-field%2Froute.ts&appDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupdate-field%2Froute&page=%2Fapi%2Fupdate-field%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupdate-field%2Froute.ts&appDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_federicocaccia_code_daily_review_src_app_api_update_field_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/update-field/route.ts */ \"(rsc)/./src/app/api/update-field/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/update-field/route\",\n        pathname: \"/api/update-field\",\n        filename: \"route\",\n        bundlePath: \"app/api/update-field/route\"\n    },\n    resolvedPagePath: \"/Users/federicocaccia/code/daily-review/src/app/api/update-field/route.ts\",\n    nextConfigOutput,\n    userland: _Users_federicocaccia_code_daily_review_src_app_api_update_field_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/update-field/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGRhdGUtZmllbGQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwZGF0ZS1maWVsZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwZGF0ZS1maWVsZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmZlZGVyaWNvY2FjY2lhJTJGY29kZSUyRmRhaWx5LXJldmlldyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZmZWRlcmljb2NhY2NpYSUyRmNvZGUlMkZkYWlseS1yZXZpZXcmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGFpbHktcmV2aWV3Lz80ODk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9mZWRlcmljb2NhY2NpYS9jb2RlL2RhaWx5LXJldmlldy9zcmMvYXBwL2FwaS91cGRhdGUtZmllbGQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwZGF0ZS1maWVsZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwZGF0ZS1maWVsZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXBkYXRlLWZpZWxkL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2ZlZGVyaWNvY2FjY2lhL2NvZGUvZGFpbHktcmV2aWV3L3NyYy9hcHAvYXBpL3VwZGF0ZS1maWVsZC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXBkYXRlLWZpZWxkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupdate-field%2Froute&page=%2Fapi%2Fupdate-field%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupdate-field%2Froute.ts&appDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/lib/spreadsheet.ts":
/*!****************************************!*\
  !*** ./src/app/api/lib/spreadsheet.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadDayData: () => (/* binding */ loadDayData),\n/* harmony export */   updateField: () => (/* binding */ updateField),\n/* harmony export */   updateNotes: () => (/* binding */ updateNotes)\n/* harmony export */ });\n/* harmony import */ var google_spreadsheet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! google-spreadsheet */ \"(rsc)/./node_modules/google-spreadsheet/dist/index.mjs\");\n/* harmony import */ var google_auth_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! google-auth-library */ \"(rsc)/./node_modules/google-auth-library/build/src/index.js\");\n\n\n// Constantes\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // ms\nconst OPERATION_TIMEOUT = 5000; // 5 segundos máximo por operación\nconst RATE_LIMIT_DELAY = 2000; // 2 segundos entre operaciones\n// Cache de conexión y datos\nlet cachedDoc = null;\nlet lastRequestTime = 0;\nlet cachedRows = null;\nlet lastRowsFetch = 0;\nconst CACHE_TTL = 1000; // 1 segundo de TTL para el cache\nasync function waitForRateLimit() {\n    const now = Date.now();\n    const timeSinceLastRequest = now - lastRequestTime;\n    if (timeSinceLastRequest < RATE_LIMIT_DELAY) {\n        await wait(RATE_LIMIT_DELAY - timeSinceLastRequest);\n    }\n    lastRequestTime = Date.now();\n}\nasync function ensureHeaders(sheet) {\n    try {\n        // Primero cargar la hoja\n        await sheet.loadCells(\"A1:Z1\");\n        // Obtener los headers actuales y su posición\n        const existingHeadersMap = new Map();\n        let lastUsedColumn = -1;\n        for(let i = 0; i < 26; i++){\n            const cell = sheet.getCell(0, i);\n            if (cell.value) {\n                existingHeadersMap.set(cell.value.toString(), i);\n                lastUsedColumn = i;\n            } else if (lastUsedColumn === -1) {\n                continue;\n            } else {\n                break;\n            }\n        }\n        // Verificar qué headers faltan\n        const missingHeaders = HEADERS.filter((header)=>!existingHeadersMap.has(header));\n        if (missingHeaders.length > 0) {\n            console.log(\"Adding new headers at the end:\", missingHeaders);\n            // Agregar los headers faltantes al final\n            for (const header of missingHeaders){\n                lastUsedColumn++;\n                const cell = sheet.getCell(0, lastUsedColumn);\n                cell.value = header;\n            }\n            await sheet.saveUpdatedCells();\n        }\n    } catch (error) {\n        console.error(\"Error ensuring headers:\", error);\n        throw error;\n    }\n}\nasync function getSpreadsheetConnection() {\n    try {\n        if (!cachedDoc) {\n            const SCOPES = [\n                \"https://www.googleapis.com/auth/spreadsheets\"\n            ];\n            const jwt = new google_auth_library__WEBPACK_IMPORTED_MODULE_1__.JWT({\n                email: process.env.GOOGLE_SHEETS_CLIENT_EMAIL,\n                key: process.env.GOOGLE_SHEETS_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\n                scopes: SCOPES\n            });\n            cachedDoc = new google_spreadsheet__WEBPACK_IMPORTED_MODULE_0__.GoogleSpreadsheet(process.env.GOOGLE_SHEETS_SPREADSHEET_ID, jwt);\n            await cachedDoc.loadInfo();\n            // Asegurarnos de que existan todas las columnas necesarias\n            const sheet = cachedDoc.sheetsByIndex[0];\n            await ensureHeaders(sheet);\n        }\n        return cachedDoc;\n    } catch (error) {\n        cachedDoc = null;\n        console.error(\"Error getting spreadsheet connection:\", error);\n        throw error;\n    }\n}\nasync function getSheetRows(sheet) {\n    const now = Date.now();\n    if (cachedRows && now - lastRowsFetch < CACHE_TTL) {\n        return cachedRows;\n    }\n    await waitForRateLimit();\n    cachedRows = await sheet.getRows();\n    lastRowsFetch = now;\n    return cachedRows;\n}\nconst wait = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\n// Función para ejecutar una operación con timeout\nasync function withTimeout(operation) {\n    const timeoutPromise = new Promise((_, reject)=>{\n        setTimeout(()=>reject(new Error(\"Operation timed out\")), OPERATION_TIMEOUT);\n    });\n    return Promise.race([\n        operation(),\n        timeoutPromise\n    ]);\n}\nasync function withRetry(operation) {\n    let lastError;\n    for(let attempt = 1; attempt <= MAX_RETRIES; attempt++){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error;\n            console.error(`Attempt ${attempt} failed:`, error);\n            if (attempt === MAX_RETRIES) throw error;\n            // Si es un error de rate limit, esperamos más tiempo\n            const delay = error.status === 429 ? RETRY_DELAY * Math.pow(2, attempt + 1) // Más tiempo para rate limits\n             : RETRY_DELAY * Math.pow(2, attempt - 1); // Tiempo normal para otros errores\n            await wait(delay);\n        }\n    }\n    throw lastError;\n}\nconst HEADERS = [\n    \"date\",\n    \"workout_running\",\n    \"workout_abs\",\n    \"workout_chest\",\n    \"workout_back\",\n    \"workout_shoulders\",\n    \"workout_biceps\",\n    \"workout_triceps\",\n    \"workout_legs\",\n    \"workout_stretching\",\n    \"workout_aerobic\",\n    \"relax_yoga\",\n    \"relax_meditation\",\n    \"health_sleep_seven\",\n    \"health_acidity\",\n    \"productivity_level\",\n    \"productivity_reading_time\",\n    \"nutrition_fruits\",\n    \"nutrition_polyphenols\",\n    \"nutrition_heavy_food\",\n    \"nutrition_fast_food\",\n    \"nutrition_yogurt\",\n    \"life_couple_discussions\",\n    \"life_gaming\",\n    \"notes\"\n];\n// Mapa de tipos de campos\nconst FIELD_TYPES = {\n    \"workout_running\": \"minutes\",\n    \"workout_abs\": \"boolean\",\n    \"workout_chest\": \"boolean\",\n    \"workout_back\": \"boolean\",\n    \"workout_shoulders\": \"boolean\",\n    \"workout_biceps\": \"boolean\",\n    \"workout_triceps\": \"boolean\",\n    \"workout_legs\": \"boolean\",\n    \"workout_stretching\": \"boolean\",\n    \"workout_aerobic\": \"boolean\",\n    \"relax_yoga\": \"boolean\",\n    \"relax_meditation\": \"boolean\",\n    \"health_sleep_seven\": \"boolean\",\n    \"health_acidity\": \"boolean\",\n    \"productivity_level\": \"slider\",\n    \"productivity_reading_time\": \"minutes\",\n    \"nutrition_fruits\": \"minutes\",\n    \"nutrition_polyphenols\": \"boolean\",\n    \"nutrition_heavy_food\": \"boolean\",\n    \"nutrition_fast_food\": \"boolean\",\n    \"nutrition_yogurt\": \"boolean\",\n    \"life_couple_discussions\": \"slider\",\n    \"life_gaming\": \"boolean\",\n    \"notes\": \"text\"\n};\nasync function updateField(date, sectionId, fieldId, value) {\n    return withRetry(async ()=>{\n        const doc = await getSpreadsheetConnection();\n        const sheet = doc.sheetsByIndex[0];\n        // Una sola lectura para encontrar o crear la fila\n        const rows = await sheet.getRows();\n        const rowIndex = rows.findIndex((row)=>row.get(\"date\") === date);\n        const fieldKey = `${sectionId}_${fieldId}`;\n        try {\n            if (rowIndex === -1) {\n                // Si no existe la fila, la creamos con TODOS los campos inicializados\n                const newRow = {\n                    date\n                };\n                // Inicializar todos los campos con sus valores por defecto según su tipo\n                HEADERS.forEach((header)=>{\n                    if (header === \"date\") return; // Skip date as it's already set\n                    const fieldType = FIELD_TYPES[header];\n                    switch(fieldType){\n                        case \"boolean\":\n                            newRow[header] = \"FALSE\";\n                            break;\n                        case \"minutes\":\n                            newRow[header] = \"0\";\n                            break;\n                        case \"slider\":\n                            newRow[header] = \"1\";\n                            break;\n                        case \"text\":\n                            newRow[header] = \"\";\n                            break;\n                    }\n                });\n                // Actualizar el campo específico con el valor proporcionado\n                newRow[fieldKey] = typeof value === \"boolean\" ? value.toString().toUpperCase() : value.toString();\n                // Solo una escritura para crear la fila\n                await sheet.addRow(newRow);\n            } else {\n                // Si existe, actualizamos solo el campo específico\n                const formattedValue = typeof value === \"boolean\" ? value.toString().toUpperCase() : value.toString();\n                rows[rowIndex].set(fieldKey, formattedValue);\n                // Solo una escritura para actualizar el campo\n                await rows[rowIndex].save();\n            }\n        } catch (error) {\n            console.error(\"Error in updateField operation:\", {\n                error,\n                date,\n                sectionId,\n                fieldId,\n                value,\n                fieldKey\n            });\n            throw error;\n        }\n    });\n}\nasync function updateNotes(date, notes) {\n    return withRetry(async ()=>{\n        const doc = await getSpreadsheetConnection();\n        const sheet = doc.sheetsByIndex[0];\n        const rows = await sheet.getRows();\n        const rowIndex = rows.findIndex((row)=>row.get(\"date\") === date);\n        if (rowIndex === -1) {\n            // Si no existe la fila, la creamos con TODOS los campos inicializados\n            const newRow = {\n                date\n            };\n            // Inicializar todos los campos con sus valores por defecto según su tipo\n            HEADERS.forEach((header)=>{\n                if (header === \"date\") return; // Skip date as it's already set\n                const fieldType = FIELD_TYPES[header];\n                switch(fieldType){\n                    case \"boolean\":\n                        newRow[header] = \"FALSE\";\n                        break;\n                    case \"minutes\":\n                        newRow[header] = \"0\";\n                        break;\n                    case \"slider\":\n                        newRow[header] = \"1\";\n                        break;\n                    case \"text\":\n                        newRow[header] = header === \"notes\" ? notes : \"\";\n                        break;\n                }\n            });\n            await sheet.addRow(newRow);\n        } else {\n            rows[rowIndex].set(\"notes\", notes);\n            await rows[rowIndex].save();\n        }\n    });\n}\nasync function loadDayData(date) {\n    return withRetry(async ()=>{\n        const doc = await getSpreadsheetConnection();\n        const sheet = doc.sheetsByIndex[0];\n        // Una sola lectura para obtener los datos del día\n        const rows = await sheet.getRows();\n        const row = rows.find((row)=>row.get(\"date\") === date);\n        if (!row) return null;\n        const data = {};\n        HEADERS.forEach((header)=>{\n            const value = row.get(header);\n            if (header === \"notes\") {\n                data[header] = value || \"\";\n            } else if (header === \"date\") {\n                data[header] = value;\n            } else {\n                if (value === \"TRUE\" || value === \"true\") {\n                    data[header] = true;\n                } else if (value === \"FALSE\" || value === \"false\") {\n                    data[header] = false;\n                } else if (!isNaN(Number(value)) && value !== \"\") {\n                    data[header] = Number(value);\n                } else {\n                    data[header] = value || \"\";\n                }\n            }\n        });\n        return data;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRd0QsSUFBSUMsR0FBRyxDQUFDbkQ7WUFFdEIsSUFBSUEsV0FBVyxTQUFTO2dCQUN0QmdFLElBQUksQ0FBQ2hFLE9BQU8sR0FBR04sU0FBUztZQUMxQixPQUFPLElBQUlNLFdBQVcsUUFBUTtnQkFDNUJnRSxJQUFJLENBQUNoRSxPQUFPLEdBQUdOO1lBQ2pCLE9BQU87Z0JBQ0wsSUFBSUEsVUFBVSxVQUFVQSxVQUFVLFFBQVE7b0JBQ3hDc0UsSUFBSSxDQUFDaEUsT0FBTyxHQUFHO2dCQUNqQixPQUFPLElBQUlOLFVBQVUsV0FBV0EsVUFBVSxTQUFTO29CQUNqRHNFLElBQUksQ0FBQ2hFLE9BQU8sR0FBRztnQkFDakIsT0FBTyxJQUFJLENBQUNpRSxNQUFNQyxPQUFPeEUsV0FBV0EsVUFBVSxJQUFJO29CQUNoRHNFLElBQUksQ0FBQ2hFLE9BQU8sR0FBR2tFLE9BQU94RTtnQkFDeEIsT0FBTztvQkFDTHNFLElBQUksQ0FBQ2hFLE9BQU8sR0FBR04sU0FBUztnQkFDMUI7WUFDRjtRQUNGO1FBRUEsT0FBT3NFO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhaWx5LXJldmlldy8uL3NyYy9hcHAvYXBpL2xpYi9zcHJlYWRzaGVldC50cz80M2Q3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZVNwcmVhZHNoZWV0IH0gZnJvbSAnZ29vZ2xlLXNwcmVhZHNoZWV0JztcbmltcG9ydCB7IEpXVCB9IGZyb20gJ2dvb2dsZS1hdXRoLWxpYnJhcnknO1xuXG4vLyBDb25zdGFudGVzXG5jb25zdCBNQVhfUkVUUklFUyA9IDM7XG5jb25zdCBSRVRSWV9ERUxBWSA9IDEwMDA7IC8vIG1zXG5jb25zdCBPUEVSQVRJT05fVElNRU9VVCA9IDUwMDA7IC8vIDUgc2VndW5kb3MgbcOheGltbyBwb3Igb3BlcmFjacOzblxuY29uc3QgUkFURV9MSU1JVF9ERUxBWSA9IDIwMDA7IC8vIDIgc2VndW5kb3MgZW50cmUgb3BlcmFjaW9uZXNcblxuLy8gQ2FjaGUgZGUgY29uZXhpw7NuIHkgZGF0b3NcbmxldCBjYWNoZWREb2M6IEdvb2dsZVNwcmVhZHNoZWV0IHwgbnVsbCA9IG51bGw7XG5sZXQgbGFzdFJlcXVlc3RUaW1lID0gMDtcbmxldCBjYWNoZWRSb3dzOiBhbnlbXSB8IG51bGwgPSBudWxsO1xubGV0IGxhc3RSb3dzRmV0Y2ggPSAwO1xuY29uc3QgQ0FDSEVfVFRMID0gMTAwMDsgLy8gMSBzZWd1bmRvIGRlIFRUTCBwYXJhIGVsIGNhY2hlXG5cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JSYXRlTGltaXQoKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gbGFzdFJlcXVlc3RUaW1lO1xuICBcbiAgaWYgKHRpbWVTaW5jZUxhc3RSZXF1ZXN0IDwgUkFURV9MSU1JVF9ERUxBWSkge1xuICAgIGF3YWl0IHdhaXQoUkFURV9MSU1JVF9ERUxBWSAtIHRpbWVTaW5jZUxhc3RSZXF1ZXN0KTtcbiAgfVxuICBcbiAgbGFzdFJlcXVlc3RUaW1lID0gRGF0ZS5ub3coKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlSGVhZGVycyhzaGVldDogYW55KSB7XG4gIHRyeSB7XG4gICAgLy8gUHJpbWVybyBjYXJnYXIgbGEgaG9qYVxuICAgIGF3YWl0IHNoZWV0LmxvYWRDZWxscygnQTE6WjEnKTtcbiAgICBcbiAgICAvLyBPYnRlbmVyIGxvcyBoZWFkZXJzIGFjdHVhbGVzIHkgc3UgcG9zaWNpw7NuXG4gICAgY29uc3QgZXhpc3RpbmdIZWFkZXJzTWFwID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICBsZXQgbGFzdFVzZWRDb2x1bW4gPSAtMTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI2OyBpKyspIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBzaGVldC5nZXRDZWxsKDAsIGkpO1xuICAgICAgaWYgKGNlbGwudmFsdWUpIHtcbiAgICAgICAgZXhpc3RpbmdIZWFkZXJzTWFwLnNldChjZWxsLnZhbHVlLnRvU3RyaW5nKCksIGkpO1xuICAgICAgICBsYXN0VXNlZENvbHVtbiA9IGk7XG4gICAgICB9IGVsc2UgaWYgKGxhc3RVc2VkQ29sdW1uID09PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZmljYXIgcXXDqSBoZWFkZXJzIGZhbHRhblxuICAgIGNvbnN0IG1pc3NpbmdIZWFkZXJzID0gSEVBREVSUy5maWx0ZXIoaGVhZGVyID0+ICFleGlzdGluZ0hlYWRlcnNNYXAuaGFzKGhlYWRlcikpO1xuICAgIFxuICAgIGlmIChtaXNzaW5nSGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnQWRkaW5nIG5ldyBoZWFkZXJzIGF0IHRoZSBlbmQ6JywgbWlzc2luZ0hlYWRlcnMpO1xuICAgICAgXG4gICAgICAvLyBBZ3JlZ2FyIGxvcyBoZWFkZXJzIGZhbHRhbnRlcyBhbCBmaW5hbFxuICAgICAgZm9yIChjb25zdCBoZWFkZXIgb2YgbWlzc2luZ0hlYWRlcnMpIHtcbiAgICAgICAgbGFzdFVzZWRDb2x1bW4rKztcbiAgICAgICAgY29uc3QgY2VsbCA9IHNoZWV0LmdldENlbGwoMCwgbGFzdFVzZWRDb2x1bW4pO1xuICAgICAgICBjZWxsLnZhbHVlID0gaGVhZGVyO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBzaGVldC5zYXZlVXBkYXRlZENlbGxzKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuc3VyaW5nIGhlYWRlcnM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFNwcmVhZHNoZWV0Q29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBpZiAoIWNhY2hlZERvYykge1xuICAgICAgY29uc3QgU0NPUEVTID0gW1xuICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9zcHJlYWRzaGVldHMnLFxuICAgICAgXTtcblxuICAgICAgY29uc3Qgand0ID0gbmV3IEpXVCh7XG4gICAgICAgIGVtYWlsOiBwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX0NMSUVOVF9FTUFJTCxcbiAgICAgICAga2V5OiBwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1BSSVZBVEVfS0VZPy5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyksXG4gICAgICAgIHNjb3BlczogU0NPUEVTLFxuICAgICAgfSk7XG5cbiAgICAgIGNhY2hlZERvYyA9IG5ldyBHb29nbGVTcHJlYWRzaGVldChwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1NQUkVBRFNIRUVUX0lEISwgand0KTtcbiAgICAgIGF3YWl0IGNhY2hlZERvYy5sb2FkSW5mbygpO1xuICAgICAgXG4gICAgICAvLyBBc2VndXJhcm5vcyBkZSBxdWUgZXhpc3RhbiB0b2RhcyBsYXMgY29sdW1uYXMgbmVjZXNhcmlhc1xuICAgICAgY29uc3Qgc2hlZXQgPSBjYWNoZWREb2Muc2hlZXRzQnlJbmRleFswXTtcbiAgICAgIGF3YWl0IGVuc3VyZUhlYWRlcnMoc2hlZXQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkRG9jO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhY2hlZERvYyA9IG51bGw7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzcHJlYWRzaGVldCBjb25uZWN0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRTaGVldFJvd3Moc2hlZXQ6IGFueSkge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBpZiAoY2FjaGVkUm93cyAmJiAobm93IC0gbGFzdFJvd3NGZXRjaCkgPCBDQUNIRV9UVEwpIHtcbiAgICByZXR1cm4gY2FjaGVkUm93cztcbiAgfVxuXG4gIGF3YWl0IHdhaXRGb3JSYXRlTGltaXQoKTtcbiAgY2FjaGVkUm93cyA9IGF3YWl0IHNoZWV0LmdldFJvd3MoKTtcbiAgbGFzdFJvd3NGZXRjaCA9IG5vdztcbiAgcmV0dXJuIGNhY2hlZFJvd3M7XG59XG5cbmNvbnN0IHdhaXQgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZWplY3V0YXIgdW5hIG9wZXJhY2nDs24gY29uIHRpbWVvdXRcbmFzeW5jIGZ1bmN0aW9uIHdpdGhUaW1lb3V0PFQ+KG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPFQ+KChfLCByZWplY3QpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ09wZXJhdGlvbiB0aW1lZCBvdXQnKSksIE9QRVJBVElPTl9USU1FT1VUKTtcbiAgfSk7XG5cbiAgcmV0dXJuIFByb21pc2UucmFjZShbb3BlcmF0aW9uKCksIHRpbWVvdXRQcm9taXNlXSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdpdGhSZXRyeTxUPihvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGxhc3RFcnJvcjtcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IE1BWF9SRVRSSUVTOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcihgQXR0ZW1wdCAke2F0dGVtcHR9IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChhdHRlbXB0ID09PSBNQVhfUkVUUklFUykgdGhyb3cgZXJyb3I7XG4gICAgICBcbiAgICAgIC8vIFNpIGVzIHVuIGVycm9yIGRlIHJhdGUgbGltaXQsIGVzcGVyYW1vcyBtw6FzIHRpZW1wb1xuICAgICAgY29uc3QgZGVsYXkgPSBlcnJvci5zdGF0dXMgPT09IDQyOSBcbiAgICAgICAgPyBSRVRSWV9ERUxBWSAqIE1hdGgucG93KDIsIGF0dGVtcHQgKyAxKSAgLy8gTcOhcyB0aWVtcG8gcGFyYSByYXRlIGxpbWl0c1xuICAgICAgICA6IFJFVFJZX0RFTEFZICogTWF0aC5wb3coMiwgYXR0ZW1wdCAtIDEpOyAgLy8gVGllbXBvIG5vcm1hbCBwYXJhIG90cm9zIGVycm9yZXNcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdChkZWxheSk7XG4gICAgfVxuICB9XG4gIFxuICB0aHJvdyBsYXN0RXJyb3I7XG59XG5cbmNvbnN0IEhFQURFUlMgPSBbXG4gICdkYXRlJyxcbiAgJ3dvcmtvdXRfcnVubmluZycsXG4gICd3b3Jrb3V0X2FicycsXG4gICd3b3Jrb3V0X2NoZXN0JyxcbiAgJ3dvcmtvdXRfYmFjaycsXG4gICd3b3Jrb3V0X3Nob3VsZGVycycsXG4gICd3b3Jrb3V0X2JpY2VwcycsXG4gICd3b3Jrb3V0X3RyaWNlcHMnLFxuICAnd29ya291dF9sZWdzJyxcbiAgJ3dvcmtvdXRfc3RyZXRjaGluZycsXG4gICd3b3Jrb3V0X2Flcm9iaWMnLFxuICAncmVsYXhfeW9nYScsXG4gICdyZWxheF9tZWRpdGF0aW9uJyxcbiAgJ2hlYWx0aF9zbGVlcF9zZXZlbicsXG4gICdoZWFsdGhfYWNpZGl0eScsXG4gICdwcm9kdWN0aXZpdHlfbGV2ZWwnLFxuICAncHJvZHVjdGl2aXR5X3JlYWRpbmdfdGltZScsXG4gICdudXRyaXRpb25fZnJ1aXRzJyxcbiAgJ251dHJpdGlvbl9wb2x5cGhlbm9scycsXG4gICdudXRyaXRpb25faGVhdnlfZm9vZCcsXG4gICdudXRyaXRpb25fZmFzdF9mb29kJyxcbiAgJ251dHJpdGlvbl95b2d1cnQnLFxuICAnbGlmZV9jb3VwbGVfZGlzY3Vzc2lvbnMnLFxuICAnbGlmZV9nYW1pbmcnLFxuICAnbm90ZXMnXG5dO1xuXG4vLyBNYXBhIGRlIHRpcG9zIGRlIGNhbXBvc1xuY29uc3QgRklFTERfVFlQRVM6IFJlY29yZDxzdHJpbmcsICdib29sZWFuJyB8ICdtaW51dGVzJyB8ICdzbGlkZXInIHwgJ3RleHQnPiA9IHtcbiAgJ3dvcmtvdXRfcnVubmluZyc6ICdtaW51dGVzJyxcbiAgJ3dvcmtvdXRfYWJzJzogJ2Jvb2xlYW4nLFxuICAnd29ya291dF9jaGVzdCc6ICdib29sZWFuJyxcbiAgJ3dvcmtvdXRfYmFjayc6ICdib29sZWFuJyxcbiAgJ3dvcmtvdXRfc2hvdWxkZXJzJzogJ2Jvb2xlYW4nLFxuICAnd29ya291dF9iaWNlcHMnOiAnYm9vbGVhbicsXG4gICd3b3Jrb3V0X3RyaWNlcHMnOiAnYm9vbGVhbicsXG4gICd3b3Jrb3V0X2xlZ3MnOiAnYm9vbGVhbicsXG4gICd3b3Jrb3V0X3N0cmV0Y2hpbmcnOiAnYm9vbGVhbicsXG4gICd3b3Jrb3V0X2Flcm9iaWMnOiAnYm9vbGVhbicsXG4gICdyZWxheF95b2dhJzogJ2Jvb2xlYW4nLFxuICAncmVsYXhfbWVkaXRhdGlvbic6ICdib29sZWFuJyxcbiAgJ2hlYWx0aF9zbGVlcF9zZXZlbic6ICdib29sZWFuJyxcbiAgJ2hlYWx0aF9hY2lkaXR5JzogJ2Jvb2xlYW4nLFxuICAncHJvZHVjdGl2aXR5X2xldmVsJzogJ3NsaWRlcicsXG4gICdwcm9kdWN0aXZpdHlfcmVhZGluZ190aW1lJzogJ21pbnV0ZXMnLFxuICAnbnV0cml0aW9uX2ZydWl0cyc6ICdtaW51dGVzJyxcbiAgJ251dHJpdGlvbl9wb2x5cGhlbm9scyc6ICdib29sZWFuJyxcbiAgJ251dHJpdGlvbl9oZWF2eV9mb29kJzogJ2Jvb2xlYW4nLFxuICAnbnV0cml0aW9uX2Zhc3RfZm9vZCc6ICdib29sZWFuJyxcbiAgJ251dHJpdGlvbl95b2d1cnQnOiAnYm9vbGVhbicsXG4gICdsaWZlX2NvdXBsZV9kaXNjdXNzaW9ucyc6ICdzbGlkZXInLFxuICAnbGlmZV9nYW1pbmcnOiAnYm9vbGVhbicsXG4gICdub3Rlcyc6ICd0ZXh0J1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUZpZWxkKGRhdGU6IHN0cmluZywgc2VjdGlvbklkOiBzdHJpbmcsIGZpZWxkSWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pIHtcbiAgcmV0dXJuIHdpdGhSZXRyeShhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZ2V0U3ByZWFkc2hlZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc2hlZXQgPSBkb2Muc2hlZXRzQnlJbmRleFswXTtcbiAgICBcbiAgICAvLyBVbmEgc29sYSBsZWN0dXJhIHBhcmEgZW5jb250cmFyIG8gY3JlYXIgbGEgZmlsYVxuICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBzaGVldC5nZXRSb3dzKCk7XG4gICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmZpbmRJbmRleChyb3cgPT4gcm93LmdldCgnZGF0ZScpID09PSBkYXRlKTtcbiAgICBjb25zdCBmaWVsZEtleSA9IGAke3NlY3Rpb25JZH1fJHtmaWVsZElkfWA7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAvLyBTaSBubyBleGlzdGUgbGEgZmlsYSwgbGEgY3JlYW1vcyBjb24gVE9ET1MgbG9zIGNhbXBvcyBpbmljaWFsaXphZG9zXG4gICAgICAgIGNvbnN0IG5ld1JvdzogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICAgICAgICBkYXRlLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pY2lhbGl6YXIgdG9kb3MgbG9zIGNhbXBvcyBjb24gc3VzIHZhbG9yZXMgcG9yIGRlZmVjdG8gc2Vnw7puIHN1IHRpcG9cbiAgICAgICAgSEVBREVSUy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgaWYgKGhlYWRlciA9PT0gJ2RhdGUnKSByZXR1cm47IC8vIFNraXAgZGF0ZSBhcyBpdCdzIGFscmVhZHkgc2V0XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gRklFTERfVFlQRVNbaGVhZGVyXTtcbiAgICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgIG5ld1Jvd1toZWFkZXJdID0gJ0ZBTFNFJztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtaW51dGVzJzpcbiAgICAgICAgICAgICAgbmV3Um93W2hlYWRlcl0gPSAnMCc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2xpZGVyJzpcbiAgICAgICAgICAgICAgbmV3Um93W2hlYWRlcl0gPSAnMSc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgIG5ld1Jvd1toZWFkZXJdID0gJyc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvIGVzcGVjw61maWNvIGNvbiBlbCB2YWxvciBwcm9wb3JjaW9uYWRvXG4gICAgICAgIG5ld1Jvd1tmaWVsZEtleV0gPSB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTb2xvIHVuYSBlc2NyaXR1cmEgcGFyYSBjcmVhciBsYSBmaWxhXG4gICAgICAgIGF3YWl0IHNoZWV0LmFkZFJvdyhuZXdSb3cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgZXhpc3RlLCBhY3R1YWxpemFtb3Mgc29sbyBlbCBjYW1wbyBlc3BlY8OtZmljb1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgcm93c1tyb3dJbmRleF0uc2V0KGZpZWxkS2V5LCBmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTb2xvIHVuYSBlc2NyaXR1cmEgcGFyYSBhY3R1YWxpemFyIGVsIGNhbXBvXG4gICAgICAgIGF3YWl0IHJvd3Nbcm93SW5kZXhdLnNhdmUoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlRmllbGQgb3BlcmF0aW9uOicsIHtcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGRhdGUsXG4gICAgICAgIHNlY3Rpb25JZCxcbiAgICAgICAgZmllbGRJZCxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGZpZWxkS2V5XG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVOb3RlcyhkYXRlOiBzdHJpbmcsIG5vdGVzOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHdpdGhSZXRyeShhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZ2V0U3ByZWFkc2hlZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc2hlZXQgPSBkb2Muc2hlZXRzQnlJbmRleFswXTtcbiAgICBcbiAgICBjb25zdCByb3dzID0gYXdhaXQgc2hlZXQuZ2V0Um93cygpO1xuICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5maW5kSW5kZXgocm93ID0+IHJvdy5nZXQoJ2RhdGUnKSA9PT0gZGF0ZSk7XG4gICAgXG4gICAgaWYgKHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgLy8gU2kgbm8gZXhpc3RlIGxhIGZpbGEsIGxhIGNyZWFtb3MgY29uIFRPRE9TIGxvcyBjYW1wb3MgaW5pY2lhbGl6YWRvc1xuICAgICAgY29uc3QgbmV3Um93OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xuICAgICAgICBkYXRlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gSW5pY2lhbGl6YXIgdG9kb3MgbG9zIGNhbXBvcyBjb24gc3VzIHZhbG9yZXMgcG9yIGRlZmVjdG8gc2Vnw7puIHN1IHRpcG9cbiAgICAgIEhFQURFUlMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICBpZiAoaGVhZGVyID09PSAnZGF0ZScpIHJldHVybjsgLy8gU2tpcCBkYXRlIGFzIGl0J3MgYWxyZWFkeSBzZXRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IEZJRUxEX1RZUEVTW2hlYWRlcl07XG4gICAgICAgIHN3aXRjaCAoZmllbGRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICBuZXdSb3dbaGVhZGVyXSA9ICdGQUxTRSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdtaW51dGVzJzpcbiAgICAgICAgICAgIG5ld1Jvd1toZWFkZXJdID0gJzAnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc2xpZGVyJzpcbiAgICAgICAgICAgIG5ld1Jvd1toZWFkZXJdID0gJzEnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICBuZXdSb3dbaGVhZGVyXSA9IGhlYWRlciA9PT0gJ25vdGVzJyA/IG5vdGVzIDogJyc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHNoZWV0LmFkZFJvdyhuZXdSb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3dzW3Jvd0luZGV4XS5zZXQoJ25vdGVzJywgbm90ZXMpO1xuICAgICAgYXdhaXQgcm93c1tyb3dJbmRleF0uc2F2ZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmludGVyZmFjZSBEYXlEYXRhIHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWREYXlEYXRhKGRhdGU6IHN0cmluZyk6IFByb21pc2U8RGF5RGF0YSB8IG51bGw+IHtcbiAgcmV0dXJuIHdpdGhSZXRyeShhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgZ2V0U3ByZWFkc2hlZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc2hlZXQgPSBkb2Muc2hlZXRzQnlJbmRleFswXTtcbiAgICBcbiAgICAvLyBVbmEgc29sYSBsZWN0dXJhIHBhcmEgb2J0ZW5lciBsb3MgZGF0b3MgZGVsIGTDrWFcbiAgICBjb25zdCByb3dzID0gYXdhaXQgc2hlZXQuZ2V0Um93cygpO1xuICAgIGNvbnN0IHJvdyA9IHJvd3MuZmluZChyb3cgPT4gcm93LmdldCgnZGF0ZScpID09PSBkYXRlKTtcbiAgICBcbiAgICBpZiAoIXJvdykgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBkYXRhOiBEYXlEYXRhID0ge307XG4gICAgSEVBREVSUy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJvdy5nZXQoaGVhZGVyKTtcbiAgICAgIFxuICAgICAgaWYgKGhlYWRlciA9PT0gJ25vdGVzJykge1xuICAgICAgICBkYXRhW2hlYWRlcl0gPSB2YWx1ZSB8fCAnJztcbiAgICAgIH0gZWxzZSBpZiAoaGVhZGVyID09PSAnZGF0ZScpIHtcbiAgICAgICAgZGF0YVtoZWFkZXJdID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodmFsdWUgPT09ICdUUlVFJyB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgZGF0YVtoZWFkZXJdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ0ZBTFNFJyB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgIGRhdGFbaGVhZGVyXSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIodmFsdWUpKSAmJiB2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICBkYXRhW2hlYWRlcl0gPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFbaGVhZGVyXSA9IHZhbHVlIHx8ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0pO1xufSAiXSwibmFtZXMiOlsiR29vZ2xlU3ByZWFkc2hlZXQiLCJKV1QiLCJNQVhfUkVUUklFUyIsIlJFVFJZX0RFTEFZIiwiT1BFUkFUSU9OX1RJTUVPVVQiLCJSQVRFX0xJTUlUX0RFTEFZIiwiY2FjaGVkRG9jIiwibGFzdFJlcXVlc3RUaW1lIiwiY2FjaGVkUm93cyIsImxhc3RSb3dzRmV0Y2giLCJDQUNIRV9UVEwiLCJ3YWl0Rm9yUmF0ZUxpbWl0Iiwibm93IiwiRGF0ZSIsInRpbWVTaW5jZUxhc3RSZXF1ZXN0Iiwid2FpdCIsImVuc3VyZUhlYWRlcnMiLCJzaGVldCIsImxvYWRDZWxscyIsImV4aXN0aW5nSGVhZGVyc01hcCIsIk1hcCIsImxhc3RVc2VkQ29sdW1uIiwiaSIsImNlbGwiLCJnZXRDZWxsIiwidmFsdWUiLCJzZXQiLCJ0b1N0cmluZyIsIm1pc3NpbmdIZWFkZXJzIiwiSEVBREVSUyIsImZpbHRlciIsImhlYWRlciIsImhhcyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJzYXZlVXBkYXRlZENlbGxzIiwiZXJyb3IiLCJnZXRTcHJlYWRzaGVldENvbm5lY3Rpb24iLCJTQ09QRVMiLCJqd3QiLCJlbWFpbCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfU0hFRVRTX0NMSUVOVF9FTUFJTCIsImtleSIsIkdPT0dMRV9TSEVFVFNfUFJJVkFURV9LRVkiLCJyZXBsYWNlIiwic2NvcGVzIiwiR09PR0xFX1NIRUVUU19TUFJFQURTSEVFVF9JRCIsImxvYWRJbmZvIiwic2hlZXRzQnlJbmRleCIsImdldFNoZWV0Um93cyIsImdldFJvd3MiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIndpdGhUaW1lb3V0Iiwib3BlcmF0aW9uIiwidGltZW91dFByb21pc2UiLCJfIiwicmVqZWN0IiwiRXJyb3IiLCJyYWNlIiwid2l0aFJldHJ5IiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsImRlbGF5Iiwic3RhdHVzIiwiTWF0aCIsInBvdyIsIkZJRUxEX1RZUEVTIiwidXBkYXRlRmllbGQiLCJkYXRlIiwic2VjdGlvbklkIiwiZmllbGRJZCIsImRvYyIsInJvd3MiLCJyb3dJbmRleCIsImZpbmRJbmRleCIsInJvdyIsImdldCIsImZpZWxkS2V5IiwibmV3Um93IiwiZm9yRWFjaCIsImZpZWxkVHlwZSIsInRvVXBwZXJDYXNlIiwiYWRkUm93IiwiZm9ybWF0dGVkVmFsdWUiLCJzYXZlIiwidXBkYXRlTm90ZXMiLCJub3RlcyIsImxvYWREYXlEYXRhIiwiZmluZCIsImRhdGEiLCJpc05hTiIsIk51bWJlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/lib/spreadsheet.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/update-field/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/update-field/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_spreadsheet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/spreadsheet */ \"(rsc)/./src/app/api/lib/spreadsheet.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\nasync function POST(request) {\n    try {\n        const { date, sectionId, fieldId, value } = await request.json();\n        // Debug logging\n        console.log(\"Updating field:\", {\n            date,\n            sectionId,\n            fieldId,\n            value,\n            fieldKey: `${sectionId}_${fieldId}`\n        });\n        await (0,_lib_spreadsheet__WEBPACK_IMPORTED_MODULE_0__.updateField)(date, sectionId, fieldId, value);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error updating field:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            success: false,\n            error: \"Failed to update field\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91cGRhdGUtZmllbGQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ047QUFFcEMsZUFBZUUsS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUosUUFBUUssSUFBSTtRQUU5RCxnQkFBZ0I7UUFDaEJDLFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUI7WUFDN0JOO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FJLFVBQVUsQ0FBQyxFQUFFTixVQUFVLENBQUMsRUFBRUMsUUFBUSxDQUFDO1FBQ3JDO1FBRUEsTUFBTU4sNkRBQVdBLENBQUNJLE1BQU1DLFdBQVdDLFNBQVNDO1FBQzVDLE9BQU9OLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUksU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBT0MsT0FBTztRQUNkSixRQUFRSSxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPWixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQUVJLFNBQVM7WUFBT0MsT0FBTztRQUF5QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM5RjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGFpbHktcmV2aWV3Ly4vc3JjL2FwcC9hcGkvdXBkYXRlLWZpZWxkL3JvdXRlLnRzP2EwZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXBkYXRlRmllbGQgfSBmcm9tICcuLi9saWIvc3ByZWFkc2hlZXQnO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRlLCBzZWN0aW9uSWQsIGZpZWxkSWQsIHZhbHVlIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICAvLyBEZWJ1ZyBsb2dnaW5nXG4gICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIGZpZWxkOicsIHtcbiAgICAgIGRhdGUsXG4gICAgICBzZWN0aW9uSWQsXG4gICAgICBmaWVsZElkLFxuICAgICAgdmFsdWUsXG4gICAgICBmaWVsZEtleTogYCR7c2VjdGlvbklkfV8ke2ZpZWxkSWR9YFxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHVwZGF0ZUZpZWxkKGRhdGUsIHNlY3Rpb25JZCwgZmllbGRJZCwgdmFsdWUpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZmllbGQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgZmllbGQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbInVwZGF0ZUZpZWxkIiwiTmV4dFJlc3BvbnNlIiwiUE9TVCIsInJlcXVlc3QiLCJkYXRlIiwic2VjdGlvbklkIiwiZmllbGRJZCIsInZhbHVlIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJmaWVsZEtleSIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/update-field/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/lodash","vendor-chunks/axios","vendor-chunks/google-auth-library","vendor-chunks/uuid","vendor-chunks/asynckit","vendor-chunks/gaxios","vendor-chunks/whatwg-url","vendor-chunks/jws","vendor-chunks/debug","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/tr46","vendor-chunks/mime-db","vendor-chunks/https-proxy-agent","vendor-chunks/gcp-metadata","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/node-fetch","vendor-chunks/google-spreadsheet","vendor-chunks/webidl-conversions","vendor-chunks/supports-color","vendor-chunks/safe-buffer","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/jwa","vendor-chunks/is-stream","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/extend","vendor-chunks/delayed-stream","vendor-chunks/combined-stream","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupdate-field%2Froute&page=%2Fapi%2Fupdate-field%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupdate-field%2Froute.ts&appDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffedericocaccia%2Fcode%2Fdaily-review&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();